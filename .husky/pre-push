#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# í˜„ì¬ ë¸Œëœì¹˜ ì´ë¦„ í™•ì¸
current_branch=$(git rev-parse --abbrev-ref HEAD)

# ìë™í™” ì½”ë“œ ìƒì„± ë¸Œëœì¹˜ì¸ì§€ í™•ì¸
if [[ "$current_branch" == chore/server_spec_* ]]; then
  echo "ğŸ¤– ìë™í™” ì½”ë“œ ìƒì„± ë¸Œëœì¹˜ ê°ì§€ë¨ - í—ˆìŠ¤í‚¤ ê²€ì‚¬ ê±´ë„ˆëœ€"
  exit 0
fi

echo "ğŸ” íƒ€ì… ì²´í¬ ë° ë¦°íŠ¸ ê²€ì‚¬ ì¤‘..."

# íƒ€ì… ì²´í¬
echo "ğŸ“ TypeScript íƒ€ì… ì²´í¬..."
yarn type-check
if [ $? -ne 0 ]; then
  echo "âŒ íƒ€ì… ì²´í¬ ì‹¤íŒ¨! íƒ€ì… ì˜¤ë¥˜ë¥¼ ìˆ˜ì •í•´ì£¼ì„¸ìš”."
  exit 1
fi

# ë¦°íŠ¸ ì²´í¬
echo "ğŸ§¹ ESLint ê²€ì‚¬..."
yarn lint
if [ $? -ne 0 ]; then
  echo "âŒ ë¦°íŠ¸ ê²€ì‚¬ ì‹¤íŒ¨! ë¦°íŠ¸ ì˜¤ë¥˜ë¥¼ ìˆ˜ì •í•´ì£¼ì„¸ìš”."
  exit 1
fi

echo "âœ… íƒ€ì… ì²´í¬ ë° ë¦°íŠ¸ ê²€ì‚¬ ì™„ë£Œ!"
