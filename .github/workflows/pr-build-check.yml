name: PR Build Check

on:
  pull_request:
    branches:
      - main
      - develop
    types: [opened, synchronize, reopened]

jobs:
  build:
    name: Build and Lint Check
    uses: ./.github/workflows/shared/build.yml
    with:
      node-version: '18.x,20.x' # ë§¤íŠ¸ë¦­ìŠ¤ ë¹Œë“œìš©
      upload-artifacts: false
      run-lint: true
      fail-fast: false # PRì—ì„œëŠ” ëª¨ë“  Node ë²„ì „ í…ŒìŠ¤íŠ¸

  build-status:
    name: Build Status Check
    runs-on: ubuntu-latest
    needs: build
    if: always()

    steps:
      - name: Check build result
        run: |
          if [ "${{ needs.build.outputs.build-status }}" = "success" ]; then
            echo "âœ… All builds passed!"
            echo "ğŸ‰ PR is ready for review"
          else
            echo "âŒ Build failed!"
            echo "ğŸ”§ Please fix the build issues before merging"
            exit 1
          fi
